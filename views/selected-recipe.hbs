<div class="container">
  {{#with recipe}}

  <div class="bodyRecipe">
    <div class="stepsInfo">
      <div class="displayTitle">
        <h5 class="title">{{this.title}}</h5>
        <div class="tag here mt-3">
          {{#each tags}}
          <span class="{{this}}">#{{this}}</span>
          {{/each}}
        </div>
        <p class="desc mt-3"> {{this.shortDescription}}</p>

        <div class="prepInfo">
          <div class="eachInfo">
            <p><i class="fas fa-clock"></i></p>
            <p class="number"> {{this.preparationTime}}</p>
          </div>
          <div class="eachInfo">
            <p>Servings</p>
            <p class="number">{{this.servings}}</p>
          </div>
          <div class="eachInfo">
            <p>Difficulty</p>
            <p class="number">{{this.difficulty}}</p>
          </div>
        </div>

      </div>

      <h4 class="subTitle mt-2">Ingredients</h4>
      <ul class="list">
        {{#each ingredients}}
        <li class=""><i class="far fa-check-square"></i>{{this.quantity}} {{this.measure}} {{this.name}}</li>
        {{/each}}
      </ul>
      <h4 class="subTitle mt-3">How to do it?</h4>
      <div class="howTo">
        <p>{{this.steps}}</p>
      </div>

      <br>
      <a href="/recipe/edit/{{this._id}}">Edit...</a>
      <a href="/recipe/delete/{{this._id}}">...Delete</a>


    </div>

    <div class="generalInfo">

      <img src="{{this.imgPath}}" class="imgRecipeId img-thumbnail" alt="...">
      <p class="text-center">By <span class="userName">{{user_id.username}}</span></p>
      <div class="buttonsRecipes">
        <button><i class="fas fa-heart"></i></button>
        <button class="shopping-btn"> <i class="fas fa-shopping-cart"></i></button>
      </div>

    </div>
    {{/with}}
  </div>
</div>

<script>
  let shoppingCart = document.querySelector(".shopping-btn");

  const recipe = JSON.parse('{{{id}}}');

  shoppingCart.onclick = function () {
    console.log("click!");
    fetch(`/shopping-list/${recipe._id}`)
      .then((res) => res.json())
      .then((response) => {
        console.log(response)
        //Insert new class to button
        shoppingCart.setAttribute("class", "list-saved");
      });
  };
</script>